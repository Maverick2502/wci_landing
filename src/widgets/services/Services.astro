---
import "./services.scss";
---

<section class="services">
  <div class="services__container">
    <div class="services__container-title">
      <h1>Наши услуги</h1>
    </div>

    <div class="accordion">
      <div class="accordion__item">
        <div class="accordion__item__header">IT-аутсорсинг</div>
        <div class="accordion__item__body">
          <div class="accordion__item__body__content">
            Системы управления проектами
            <br />
            Системы управления задачами (Task Management Systems)
          </div>
        </div>
      </div>

      <div class="border"></div>

      <div class="accordion__item">
        <div class="accordion__item__header">Разработка ПО</div>
        <div class="accordion__item__body">
          <div class="accordion__item__body__content">
            Системы управления проектами
            <br />
            Системы управления задачами (Task Management Systems)
          </div>
        </div>
      </div>

      <div class="border"></div>

      <div class="accordion__item">
        <div class="accordion__item__header">Решения по аутстаффингу</div>
        <div class="accordion__item__body">
          <div class="accordion__item__body__content">
            Системы управления проектами
            <br />
            Системы управления задачами (Task Management Systems) Системы управления проектами
            <br />
            Системы управления задачами (Task Management Systems)
          </div>
        </div>
      </div>

      <div class="border"></div>

      <div class="accordion__item">
        <div class="accordion__item__header">Услуги по кибербезопасности</div>
        <div class="accordion__item__body">
          <div class="accordion__item__body__content">
            Системы управления проектами
            <br />
            Системы управления задачами (Task Management Systems)
          </div>
        </div>
      </div>

      <div class="border"></div>

      <div class="accordion__item">
        <div class="accordion__item__header">Консалтинг и стратегия</div>
        <div class="accordion__item__body">
          <div class="accordion__item__body__content">
            Системы управления проектами
            <br />
            Системы управления задачами (Task Management Systems)
          </div>
        </div>
      </div>

      <div class="border"></div>
    </div>
  </div>
</section>

<script>
  const accordion = document.querySelector(".accordion");

  function handleAccordionClick(event: Event) {
    if (!(event.target instanceof HTMLElement)) return;

    if (event.target.classList.contains("accordion__item__header")) {
      const accordionItemHeader = event.target;
      const accordionItemBody = accordionItemHeader.nextElementSibling as HTMLElement;

      // Close other open items
      const currentlyActiveHeader = document.querySelector(".accordion__item__header.active") as HTMLElement | null;
      if (currentlyActiveHeader && currentlyActiveHeader !== accordionItemHeader) {
        currentlyActiveHeader.classList.remove("active");
        currentlyActiveHeader.nextElementSibling!.style.maxHeight = "0";
      }

      // Toggle the active state and adjust the height
      accordionItemHeader.classList.toggle("active");
      accordionItemBody.style.maxHeight = accordionItemHeader.classList.contains("active")
        ? `${accordionItemBody.scrollHeight}px`
        : "0";
    }
  }

  accordion!.addEventListener("click", handleAccordionClick);
</script>
